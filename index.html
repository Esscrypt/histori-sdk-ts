<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@esscrypt/histori-sdk</title><meta name="description" content="Documentation for @esscrypt/histori-sdk"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@esscrypt/histori-sdk</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>@esscrypt/histori-sdk</h2></div><div class="tsd-panel tsd-typography"><a id="md:histori-sdk-for-typescript" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Histori SDK for TypeScript<a href="#md:histori-sdk-for-typescript" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><img src="media/banner.webp" alt="Histori SDK Banner"></p>
<p>The Histori SDK is the easiest way to interact with the Histori API for working with historical blockchain data. This SDK supports various blockchain networks, including Ethereum Mainnet and Testnets.</p>
<p><strong>Recommended:</strong> Use Node.js v18 or above for the best experience.</p>
<blockquote>
<p><strong>Note:</strong> An API key is required. You can register for a free key on the Histori <a href="https://histori.xyz" target="_blank" class="external">website</a>.</p>
</blockquote>
<a id="md:table-of-contents" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Table of Contents<a href="#md:table-of-contents" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><a href="#md:histori-sdk-for-typescript">Histori SDK for TypeScript</a>
<ul>
<li><a href="#md:table-of-contents">Table of Contents</a></li>
<li><a href="#md:documentation">Documentation</a></li>
<li><a href="#md:installation">Installation</a></li>
<li><a href="#md:creating-a-client-with-historiclient">Creating a Client with HistoriClient</a></li>
<li><a href="#md:using-the-historiclient">Using the HistoriClient</a>
<ul>
<li><a href="#md:fetching-tokens">Fetching Tokens</a></li>
<li><a href="#md:fetching-balance">Fetching Balance</a></li>
<li><a href="#md:fetching-allowance">Fetching Allowance</a></li>
<li><a href="#md:fetching-eth-to-usdt-price">Fetching ETH to USDT Price</a></li>
</ul>
</li>
<li><a href="#md:examples">Examples</a></li>
<li><a href="#md:default-network-and-version">Default Network and Version</a></li>
<li><a href="#md:options-object-in-methods">Options Object in Methods</a></li>
<li><a href="#md:options-reference">Options reference</a></li>
<li><a href="#md:error-handling">Error Handling</a></li>
<li><a href="#md:contributing">Contributing</a></li>
<li><a href="#md:show-your-support">Show Your Support</a></li>
<li><a href="#md:license">License</a></li>
</ul>
</li>
</ul>
<a id="md:documentation" class="tsd-anchor"></a><h2 class="tsd-anchor-link"><a href="https://esscrypt.github.io/histori-sdk-ts" target="_blank" class="external">Documentation</a><a href="#md:documentation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>For detailed API documentation and additional examples, visit the official <a href="https://esscrypt.github.io/histori-sdk-ts" target="_blank" class="external">Histori SDK Documentation</a> or the <a href="https://docs.histori.xyz/docs/api/balance-controller-get-single-balance" target="_blank" class="external">Interactive Histori API Documentation</a></p>
<hr>
<a id="md:installation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Installation<a href="#md:installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Install the SDK using npm:</p>
<pre><code class="javascript"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">install</span><span class="hl-1"> @</span><span class="hl-0">esscrypt</span><span class="hl-1">/</span><span class="hl-0">histori</span><span class="hl-1">-</span><span class="hl-0">sdk</span>
</code><button type="button">Copy</button></pre>

<a id="md:creating-a-client-with-historiclient" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Creating a Client with HistoriClient<a href="#md:creating-a-client-with-historiclient" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>HistoriClient</code> is the main entry point for interacting with the Histori API. You need to pass your API key and optional settings to configure the default version and network.</p>
<pre><code class="javascript"><span class="hl-2">import</span><span class="hl-1"> </span><span class="hl-0">HistoriClient</span><span class="hl-1"> </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@esscrypt/histori-sdk&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">HistoriClient</span><span class="hl-1">(</span><span class="hl-3">&#39;&lt;YOUR_API_KEY&gt;&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<a id="md:using-the-historiclient" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Using the HistoriClient<a href="#md:using-the-historiclient" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:fetching-tokens" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Fetching Tokens<a href="#md:fetching-tokens" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>getTokens</code> method retrieves a list of tokens with pagination options. It accepts an object with descriptive properties to specify the pagination parameters and any optional query parameters.</p>
<pre><code class="javascript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">tokens</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-0">TokenService</span><span class="hl-1">.</span><span class="hl-6">getTokens</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<a id="md:fetching-balance" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Fetching Balance<a href="#md:fetching-balance" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>You can use the <code>BalanceService</code> to fetch the balance of a specific wallet for a given token:</p>
<pre><code class="javascript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">balance</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-0">BalanceService</span><span class="hl-1">.</span><span class="hl-6">getBalance</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">holder:</span><span class="hl-1"> </span><span class="hl-3">&#39;vitalik.eth&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">tokenAddress:</span><span class="hl-1"> </span><span class="hl-3">&#39;0xF2ec4a773ef90c58d98ea734c0eBDB538519b988&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">tag:</span><span class="hl-1"> </span><span class="hl-7">20853281</span><span class="hl-1">,</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:fetching-allowance" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Fetching Allowance<a href="#md:fetching-allowance" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>AllowanceService</code> can be used to get the allowance between an owner and a spender for a specific token:</p>
<pre><code class="javascript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">allowance</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-0">AllowanceService</span><span class="hl-1">.</span><span class="hl-6">getAllowance</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">owner:</span><span class="hl-1"> </span><span class="hl-3">&#39;0xa24D38b1B49E32c1c63731810a8D42ec9dd9aa8C&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">spender:</span><span class="hl-1"> </span><span class="hl-3">&#39;0x858646372CC42E1A627fcE94aa7A7033e7CF075A&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">tokenAddress:</span><span class="hl-1"> </span><span class="hl-3">&#39;0xae7ab96520DE3A18E5e111B5EaAb095312D7fE84&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">tag:</span><span class="hl-1"> </span><span class="hl-7">20984269</span><span class="hl-1">,</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:fetching-eth-to-usdt-price" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Fetching ETH to USDT Price<a href="#md:fetching-eth-to-usdt-price" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Fetch the ETH to USDT price from the Uniswap V3 pool. Example:</p>
<pre><code class="javascript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">price</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-0">UniswapV3Service</span><span class="hl-1">.</span><span class="hl-6">getETHToUSDTPrice</span><span class="hl-1">();</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;ETH to USDT Price:&#39;</span><span class="hl-1">, </span><span class="hl-0">price</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="md:examples" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Examples<a href="#md:examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="typescript"><span class="hl-2">import</span><span class="hl-1"> </span><span class="hl-0">HistoriClient</span><span class="hl-1"> </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@esscrypt/histori-sdk&#39;</span><span class="hl-1">;</span><br/><br/><br/><span class="hl-8">// Initialize HistoriClient with your API key</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">HistoriClient</span><span class="hl-1">(</span><span class="hl-3">&#39;&lt;YOUR_API_KEY&gt;&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-8">// Example 1: Fetch paginated tokens</span><br/><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">fetchTokens</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">tokens</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-0">TokenService</span><span class="hl-1">.</span><span class="hl-6">getTokens</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Tokens:&#39;</span><span class="hl-1">, </span><span class="hl-0">tokens</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-8">// Example 2: Fetch balance for a wallet as of specific date</span><br/><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">fetchBalance</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">balance</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-0">BalanceService</span><span class="hl-1">.</span><span class="hl-6">getBalance</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-0">holder:</span><span class="hl-1"> </span><span class="hl-3">&#39;vitalik.eth&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">tokenAddress:</span><span class="hl-1"> </span><span class="hl-3">&#39;0xF2ec4a773ef90c58d98ea734c0eBDB538519b988&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">tag:</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">Date</span><span class="hl-1">(</span><span class="hl-3">&#39;2024-10-22&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Balance:&#39;</span><span class="hl-1">, </span><span class="hl-0">balance</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-8">// Example 3: Fetch allowance for owner and spender as of specific date</span><br/><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">fetchAllowance</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">allowance</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-0">AllowanceService</span><span class="hl-1">.</span><span class="hl-6">getAllowance</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-0">owner:</span><span class="hl-1"> </span><span class="hl-3">&#39;0xa24D38b1B49E32c1c63731810a8D42ec9dd9aa8C&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">spender:</span><span class="hl-1"> </span><span class="hl-3">&#39;0x858646372CC42E1A627fcE94aa7A7033e7CF075A&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">tokenAddress:</span><span class="hl-1"> </span><span class="hl-3">&#39;0xae7ab96520DE3A18E5e111B5EaAb095312D7fE84&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">tag:</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">Date</span><span class="hl-1">(</span><span class="hl-3">&#39;2024-10-22&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Allowance:&#39;</span><span class="hl-1">, </span><span class="hl-0">allowance</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-8">// Example 4: Fetch the current block height for specific network</span><br/><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">fetchBlockHeight</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">blockHeight</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-0">ChainService</span><span class="hl-1">.</span><span class="hl-6">getBlockHeight</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Block Height:&#39;</span><span class="hl-1">, </span><span class="hl-0">blockHeight</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-8">// Example 5: Fetch gas info for common transaction types</span><br/><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">fetchGasPrice</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">gasPrice</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-0">ChainService</span><span class="hl-1">.</span><span class="hl-6">getGasInfo</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;native_transfer&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Gas Info:&#39;</span><span class="hl-1">, </span><span class="hl-0">gasPrice</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-8">// Example 6: Fetch transaction details based on transaction hash</span><br/><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">fetchTransactionDetails</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">transaction</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-0">TransactionService</span><span class="hl-1">.</span><span class="hl-6">getTransactionDetails</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-0">txHash:</span><span class="hl-1"> </span><span class="hl-3">&#39;0xf85e0f37296608a3a23ffd8b2349c4cb25e9174d357c32d4416d3eb1d214080e&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Transaction Details:&#39;</span><span class="hl-1">, </span><span class="hl-0">transaction</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-8">// Example 7: Fetch Historical token supply as of specific block height</span><br/><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">fetchTokenSupply</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">tokenSupply</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-0">TokenSupplyService</span><span class="hl-1">.</span><span class="hl-6">getTokenSupply</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-0">tokenAddress:</span><span class="hl-1"> </span><span class="hl-3">&#39;0x6b175474e89094c44da98b954eedeac495271d0f&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">tag:</span><span class="hl-1"> </span><span class="hl-7">20000000</span><span class="hl-1">,</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Token Supply:&#39;</span><span class="hl-1">, </span><span class="hl-0">tokenSupply</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-8">// Example 8: Fetch the current ETH to USDT price from Uniswap V3</span><br/><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">fetchETHToUSDTPrice</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">price</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-0">UniswapV3Service</span><span class="hl-1">.</span><span class="hl-6">getETHToUSDPrice</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;ETH to USDT Price:&#39;</span><span class="hl-1">, </span><span class="hl-0">price</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-8">// Example 9: Fetch NFT token URI</span><br/><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">fetchNFTTokenUri</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">tokenUri</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-0">NFTService</span><span class="hl-1">.</span><span class="hl-6">getTokenUri</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-0">tokenAddress:</span><span class="hl-1"> </span><span class="hl-3">&#39;0x630aa263CD2D9afed696AC6ca76268AFcD0ab1b2&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">tokenId:</span><span class="hl-1"> </span><span class="hl-7">1</span><span class="hl-1">,</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;NFT Token URI:&#39;</span><span class="hl-1">, </span><span class="hl-0">tokenUri</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-8">// Example 10: Check NFT ownership as of specific Date</span><br/><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">checkNFTOwnership</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">is_owner</span><span class="hl-1">: </span><span class="hl-9">boolean</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-0">NFTService</span><span class="hl-1">.</span><span class="hl-6">isOwnerOfToken</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-0">tokenAddress:</span><span class="hl-1"> </span><span class="hl-3">&#39;0xB3e782D5919924Faa456B5b5689B0A45963da4b7&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">owner:</span><span class="hl-1"> </span><span class="hl-3">&#39;0xd5470BaFb6074B10107b303D0cCe03cA5539b6E3&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">tokenId:</span><span class="hl-1"> </span><span class="hl-7">1</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">tag:</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">Date</span><span class="hl-1">(</span><span class="hl-3">&#39;2024-10-22&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Is Owner:&#39;</span><span class="hl-1">, </span><span class="hl-0">is_owner</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-8">// Run all examples</span><br/><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">runAllExamples</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-6">fetchTokens</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-6">fetchBalance</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-6">fetchAllowance</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-6">fetchBlockHeight</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-6">fetchGasPrice</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-6">fetchTransactionDetails</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-6">fetchTokenSupply</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-6">fetchETHToUSDTPrice</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-6">fetchNFTTokenUri</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-6">checkNFTOwnership</span><span class="hl-1">();</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">runAllExamples</span><span class="hl-1">().</span><span class="hl-6">then</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;All examples executed successfully&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">}).</span><span class="hl-6">catch</span><span class="hl-1">((</span><span class="hl-0">error</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-6">error</span><span class="hl-1">(</span><span class="hl-3">&#39;Error executing examples:&#39;</span><span class="hl-1">, </span><span class="hl-0">error</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:default-network-and-version" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Default Network and Version<a href="#md:default-network-and-version" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>You can specify the <code>version</code> and <code>network</code> at the time of client creation. These values will be used as defaults for all subsequent API calls.</p>
<pre><code class="javascript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">HistoriClient</span><span class="hl-1">(</span><span class="hl-3">&#39;&lt;YOUR_API_KEY&gt;&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-0">version:</span><span class="hl-1"> </span><span class="hl-3">&#39;v1&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">network:</span><span class="hl-1"> </span><span class="hl-3">&#39;eth-mainnet&#39;</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:options-object-in-methods" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Options Object in Methods<a href="#md:options-object-in-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If you want to override these defaults for a specific call, you can provide them as part of the arguments in individual methods. Example:</p>
<pre><code class="javascript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">allowance</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-0">AllowanceService</span><span class="hl-1">.</span><span class="hl-6">getAllowance</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">owner:</span><span class="hl-1"> </span><span class="hl-3">&#39;0xOwnerAddress&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">spender:</span><span class="hl-1"> </span><span class="hl-3">&#39;0xSpenderAddress&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">tokenAddress:</span><span class="hl-1"> </span><span class="hl-3">&#39;0xTokenAddress&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">tag:</span><span class="hl-1"> </span><span class="hl-7">123456</span><span class="hl-1">}</span><br/><span class="hl-1">  { </span><span class="hl-0">version:</span><span class="hl-3">&#39;v1&#39;</span><span class="hl-1">, </span><span class="hl-0">network:</span><span class="hl-1"> </span><span class="hl-3">&#39;eth-mainnet&#39;</span><span class="hl-1"> } </span><span class="hl-8">// Override settings for this request</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<a id="md:options-reference" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Options reference<a href="#md:options-reference" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Here’s how to create a <code>HistoriClient</code> instance with options:</p>
<pre><code class="javascript"><span class="hl-2">import</span><span class="hl-1"> </span><span class="hl-0">HistoriClient</span><span class="hl-1"> </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@esscrypt/histori-sdk&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">HistoriClient</span><span class="hl-1">(</span><span class="hl-3">&#39;&lt;YOUR_API_KEY&gt;&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-0">baseUrl:</span><span class="hl-1"> </span><span class="hl-3">&#39;api.histori.xyz&#39;</span><br/><span class="hl-1">  </span><span class="hl-0">version</span><span class="hl-1">: </span><span class="hl-3">&#39;v1&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">network:</span><span class="hl-1"> </span><span class="hl-3">&#39;eth-mainnet&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">debug:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">enableRetry:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">maxRetries:</span><span class="hl-1"> </span><span class="hl-7">3</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">retryDelay:</span><span class="hl-1"> </span><span class="hl-7">3000</span><span class="hl-1">, </span><span class="hl-8">// 3 seconds</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<ul>
<li><code>debug (boolean)</code>: Enables server logs for API calls. Very useful for development. Default: <code>false</code>.</li>
<li><code>baseUrl (string)</code>: The API baseUrl to use. Default is <code>api.histori.xyz</code>. You most likely don't need to set or change it.</li>
<li><code>version (string)</code>: The API version to use. Default is <code>v1</code>. Currently, only <code>v1</code> is supported.</li>
<li><code>network (string)</code>: The blockchain network to connect to. Default is <code>eth-mainnet</code>. Currently, only <code>eth-mainnet</code> is supported.</li>
<li><code>enableRetry (boolean)</code>: Enables retrying API calls on rate limit errors (HTTP 429). Default: <code>true</code>.</li>
<li><code>maxRetries (number)</code>: Sets the number of retries on rate limit errors. Requires enableRetry to be true. Default: <code>2</code>.</li>
<li><code>retryDelay (number)</code>: Sets the delay (in ms) before retrying on rate limit errors. Requires enableRetry to be true. Default: <code>2000</code>.</li>
</ul>
<a id="md:error-handling" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Error Handling<a href="#md:error-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>All methods in the SDK throw errors with a standardized format. Example:</p>
<pre><code class="bash"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-6">&quot;message&quot;</span><span class="hl-6">:</span><span class="hl-1"> </span><span class="hl-3">&quot;Detailed error message(s), explaining how to correctly send the request&quot;,</span><br/><span class="hl-1">  </span><span class="hl-6">&quot;error&quot;</span><span class="hl-6">:</span><span class="hl-1"> </span><span class="hl-3">&quot;Not Found|Bad Request&quot;</span><br/><span class="hl-1">  </span><span class="hl-6">&quot;status&quot;</span><span class="hl-6">:</span><span class="hl-1"> </span><span class="hl-7">404</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:contributing" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Contributing<a href="#md:contributing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Contributions, issues, and feature requests are welcome! Feel free to check out the issues page for open tasks.</p>
<a id="md:show-your-support" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Show Your Support<a href="#md:show-your-support" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Give a ⭐️ if this project has helped you!</p>
<a id="md:license" class="tsd-anchor"></a><h2 class="tsd-anchor-link">License<a href="#md:license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This project is licensed under the MIT license.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:histori-sdk-for-typescript"><span>Histori SDK for <wbr/>Type<wbr/>Script</span></a><ul><li><a href="#md:table-of-contents"><span>Table of <wbr/>Contents</span></a></li><li><a href="#md:documentation"><span>Documentation</span></a></li><li><a href="#md:installation"><span>Installation</span></a></li><li><a href="#md:creating-a-client-with-historiclient"><span>Creating a <wbr/>Client with <wbr/>Histori<wbr/>Client</span></a></li><li><a href="#md:using-the-historiclient"><span>Using the <wbr/>Histori<wbr/>Client</span></a></li><li><ul><li><a href="#md:fetching-tokens"><span>Fetching <wbr/>Tokens</span></a></li><li><a href="#md:fetching-balance"><span>Fetching <wbr/>Balance</span></a></li><li><a href="#md:fetching-allowance"><span>Fetching <wbr/>Allowance</span></a></li><li><a href="#md:fetching-eth-to-usdt-price"><span>Fetching ETH to USDT <wbr/>Price</span></a></li></ul></li><li><a href="#md:examples"><span>Examples</span></a></li><li><a href="#md:default-network-and-version"><span>Default <wbr/>Network and <wbr/>Version</span></a></li><li><a href="#md:options-object-in-methods"><span>Options <wbr/>Object in <wbr/>Methods</span></a></li><li><a href="#md:options-reference"><span>Options reference</span></a></li><li><a href="#md:error-handling"><span>Error <wbr/>Handling</span></a></li><li><a href="#md:contributing"><span>Contributing</span></a></li><li><a href="#md:show-your-support"><span>Show <wbr/>Your <wbr/>Support</span></a></li><li><a href="#md:license"><span>License</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>@esscrypt/histori-sdk</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
